services:

  itq.requestcodec.apiheader.client:
    class:     Itq\Common\Plugin\RequestCodec\ClientApiHeaderRequestCodec
    arguments: ['@app.date', '%app_security_client_secret%']
    calls:     [['setErrorManager', ['@app.errormanager']]]
    tags:      [{name: 'app.requestcodec', type: 'client', priority: 300}, {name: 'itq.aware.clientprovider'}]
  itq.requestcodec.apiheader.sudo:
    class:     Itq\Common\Plugin\RequestCodec\SudoApiHeaderRequestCodec
    arguments: ['@app.date']
    calls:     [['setErrorManager', ['@app.errormanager']]]
    tags:      [{name: 'app.requestcodec', type: 'sudo', priority: 280}]
  itq.requestcodec.apiheader.user:
    class:     Itq\Common\Plugin\RequestCodec\UserApiHeaderRequestCodec
    arguments: ['@app.date', '@app.userprovider', '%app_security_user_secret%']
    calls:     [['setErrorManager', ['@app.errormanager']]]
    tags:      [{name: 'app.requestcodec', type: 'user', priority: 290}]
